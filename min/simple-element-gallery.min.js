/**
 * simple-element-gallery 0.0.0
 * Copyright (c) 2015, Dan Hasting
 * All rights reserved.
 **/
var SimpleElementGallery=function(a){var b=this;b.init=function(){c=a,void 0!==c.gallery&&b.log("gallery_missing"),void 0!==c.images&&b.log("images_missing"),b.gallery=void 0!==c.gallery?c.gallery:null,b.images=void 0!==c.images?c.images:null,b.thumbs=void 0!==c.thumbs?c.thumbs:null,b.nav=void 0!==c.nav?c.nav:null,b.nav_buttons=void 0!==c.nav_buttons?c.nav_buttons:!0,b.prev=void 0!==c.prev?c.prev:null,b.next=void 0!==c.next?c.next:null,b.prev_image=void 0!==c.prev_image?c.prev_image:null,b.next_image=void 0!==c.next_image?c.next_image:null,b.captions=void 0!==c.captions?c.captions:null,b.links=void 0!==c.links?c.links:null,b.text=void 0!==c.text?c.text:null,b.text_element=void 0!==c.text_element?c.text_element:null,b.auto=void 0!==c.auto?c.auto:!0,b.delay=void 0!==c.delay?c.delay:5e3,b.fade=void 0!==c.fade?c.fade:1e3,b.bg_color=void 0!==c.bg_color?c.bg_color:"#FFF",b.contain=void 0!==c.contain?c.contain:"none",b.thumbs&&b.images.length!=b.thumbs.length&&b.log("thumbs_count"),b.links&&b.images.length!=b.links.length&&b.log("links_count"),b.captions&&b.images.length!=b.captions.length&&b.log("captions_count"),b.active=!1,b.current=1e4*b.images.length,iterations_array={4:3,3:4,2:5,1:10},iterations_array[b.images.length]?b.thumb_iterations=iterations_array[b.images.length]:b.thumb_iterations=b.images.length>10?1:2,b.thumb_hpadding=Math.round(.015*$(b.nav).width()),b.thumb_vpadding=Math.round(.01*$(b.nav).width()),b.thumbs_wrapper_width=$(b.nav).width()-2*b.thumb_hpadding,b.nav_buttons&&(b.thumbs_wrapper_width=b.thumbs_wrapper_width-80),b.thumb_width=Math.round((b.thumbs_wrapper_width-4*b.thumb_hpadding)/5),b.thumb_height=Math.round($(b.nav).height()-2*b.thumb_vpadding),b.nav_wrapper_padding=($(b.nav).height()-b.thumb_height)/2,b.thumb_offset=b.thumb_width+b.thumb_hpadding,b.thumb_most_left=3*b.thumb_offset*-1,b.thumb_most_right=(b.images.length*b.thumb_iterations-3)*b.thumb_offset,b.thumb_wrap=Math.abs(b.thumb_most_left)+b.thumb_most_right},b.start=function(){b.insertCSS(),b.createGallery(),b.nav&&b.createNavigator(),b.prev&&b.createButton("prev",!1),b.next&&b.createButton("next",!1),b.text&&b.text_element&&b.createText(),b.preloadImage(),b.auto&&(b.timeout=setTimeout(function(){b.changeImage(1)},b.delay))},b.log=function(a){var b=a.split("_");switch(b[1]){case"missing":console.error("Simple Element Gallery: '%s' is missing from the class initialization. Please add it.",b[0]);break;case"count":console.warn("Simple Element Gallery: Number of %s does not equal number of images. This will cause unintended consequences.",b[0])}},b.insertCSS=function(){$("<style>").prop("type","text/css").html("#seg_click {z-index:96;position:absolute;top:0;left:0;width:100%;height:100%;}#seg_animator {z-index:95;position:absolute;top:0px;left:0px;width:100%;height:100%;}#seg_background {z-index:94;position:absolute;top:0px;left:0px;width:100%;height:100%;}.seg_cover {background-size:cover !important;}.seg_contain {background-size:contain !important;}#seg_navigator_wrapper {position:absolute;left:50%;}#seg_navigator {z-index:97;position:relative;right:50%;padding-top:8px; }#seg_prev, #seg_next {display:block;z-index:97;position:relative;color:#FFF;text-decoration:none;font-size:40px;text-align:center;}#seg_prev > div, #seg_next > div, #seg_navigator_prev > div, #seg_navigator_next > div {height:100%;width:100%;}#seg_navigator_prev, #seg_navigator_next {display:block;float:left;width:40px;color:#FFF;text-decoration:none;font-size:40px;text-align:center;position:relative;}.seg_thumb_caption {z-index:98;position:absolute;bottom:0px;width:100%;height:18px;line-height:17px;font-size:11px;color:#FFF;font-weight:bold;background:#000;background:rgba(0,0,0,0.7);text-align:center;}#seg_navigator_thumbs {position:relative;float:left;overflow:hidden;}.seg_navigator_action, #seg_navigator_current {z-index:99;position:absolute;cursor:pointer;background:url(i/iefix.png);}.seg_navigator_thumb {z-index:98;position:absolute;top:0;overflow:hidden;}.seg_thumb_border {z-index:99;position:absolute;border: 1px solid #FFF;opacity:0;}.seg_navigator_thumb img {position:absolute;}").appendTo("head")},b.createGallery=function(){$("<div/>",{id:"seg_click"}).appendTo(b.gallery),$("<div/>",{id:"seg_animator"}).appendTo(b.gallery),$("<div/>",{id:"seg_background"}).appendTo(b.gallery),firstImage=new Image,firstImage.src=b.getImage(),firstImage.onload=function(){b.setBackground("#seg_animator",this.width/this.height),b.setBackground("#seg_background",this.width/this.height),b.links&&b.setLink()}},b.createText=function(){$("<div/>",{id:"seg_text_inner"}).appendTo(b.text_element),$("#seg_text_inner").html(b.text[b.current%b.images.length])},b.createNavigator=function(){$("<div/>",{id:"seg_navigator_wrapper"}).appendTo(b.nav);var a="height:"+b.thumb_height+"px;width:"+$(b.nav).width()+"px;padding:"+b.nav_wrapper_padding+"px 0;";$("<div/>",{id:"seg_navigator",style:a}).appendTo("#seg_navigator_wrapper"),b.nav_buttons&&b.createButton("prev",!0);var c="height:"+$(b.nav).height()+"px;width:"+b.thumbs_wrapper_width+"px;margin:0 "+b.thumb_hpadding+"px;";for($("<div/>",{id:"seg_navigator_thumbs",style:c}).appendTo("#seg_navigator"),i=-2;i<=2;i++)position=b.thumb_offset*(i+2),width=0===i?b.thumb_width-2:b.thumb_width,height=0===i?b.thumb_height-2:b.thumb_height,prop={"class":"seg_navigator_action","data-offset":i,style:"left:"+position+"px;height:"+height+"px;width:"+width+"px;"},0===i&&(prop.id="seg_navigator_current"),$("<div/>",prop).appendTo("#seg_navigator_thumbs");for($(".seg_navigator_action").each(function(){$(this).click(function(){b.changeImage($(this).data("offset"))})}),i=0;i<b.images.length*b.thumb_iterations;i++){position=b.thumb_offset*(i-3),adjust=i+10*b.images.length-5,current_thumb=b.getThumbImage(adjust),prop={id:"seg_thumb_"+i,"class":"seg_navigator_thumb",style:"left:"+position+"px;height:"+b.thumb_height+"px;width:"+b.thumb_width+"px;"},$("<div/>",prop).appendTo("#seg_navigator_thumbs"),b.captions&&($("<div/>",{"class":"seg_thumb_caption"}).appendTo("#seg_thumb_"+i),caption=b.captions[adjust%b.images.length],$("#seg_thumb_"+i+" .seg_thumb_caption").html(caption));var d="height:"+(b.thumb_height-2)+"px;width:"+(b.thumb_width-2)+"px;";5==i&&(d+="opacity:1;"),$("<div/>",{"class":"seg_thumb_border",style:d}).appendTo("#seg_thumb_"+i);var e="background: url("+b.getThumbImage(adjust)+") no-repeat 50% 50%;background-size: cover;height:"+b.thumb_height+"px;width:"+b.thumb_width+"px;";$("<div/>",{"class":"seg_thumb_image",style:e}).appendTo("#seg_thumb_"+i)}b.nav_buttons&&b.createButton("next",!0)},b.createButton=function(a,c){if(image="prev"==a?b.prev_image:b.next_image,c?(parent="#seg_navigator",element="seg_navigator_"+a,button_style="height:"+b.thumb_height+"px;line-height:"+b.thumb_height+"px;"):(parent="prev"==a?b.prev:b.next,element="seg_"+a,button_style="line-height:"+$(parent).height()+"px;height:"+$(parent).height()+"px;width:"+$(parent).width()+"px;"),image||(button_style+="top:-3px;"),$("<a/>",{id:element,href:"#",style:button_style}).appendTo(parent),image){var d="background: url("+image+") no-repeat 50% 50%;background-size: contain;";$("<div/>",{style:d}).appendTo("#"+element)}else $("#"+element).html("prev"==a?"&laquo;":"&raquo;");$("#"+element).click(function(){b.changeImage("prev"==a?-1:1)})},b.getImage=function(a){return a||(a=b.current),b.images[a%b.images.length]},b.getThumbImage=function(a){return a||(a=b.current),b.thumbs?b.thumbs[a%b.images.length]:b.images[a%b.images.length]},b.preloadImage=function(){nextImage=new Image,nextImage.src=b.getImage(b.current+1)},b.setBackground=function(a,c){background=b.bg_color+" url("+b.getImage()+") no-repeat fixed 50% 50%",$(a).css("background",background),"all"==b.contain||"landscape"==b.contain&&c>1||"portrait"==b.contain&&1>=c?$(a).removeClass("seg_cover").addClass("seg_contain"):$(a).removeClass("seg_contain").addClass("seg_cover")},b.setLink=function(){link=b.links[b.current%b.images.length],link?$("#seg_click").css("cursor","pointer").attr("onclick","location.href='"+link+"';"):$("#seg_click").css("cursor","default").attr("onclick","")},b.adjustThumb=function(a,c){origin=parseInt($(a).css("left").replace("px","")),destination=origin+b.thumb_offset*c*-1,destination<b.thumb_most_left?(position=destination+b.thumb_wrap,$(a).css("left",position+"px")):destination>b.thumb_most_right?(position=destination-b.thumb_wrap,$(a).css("left",position+"px")):$(a).animate({left:destination+"px"},b.fade),destination==2*b.thumb_offset?$(a).children(".seg_thumb_border").animate({opacity:1},b.fade):origin==2*b.thumb_offset&&$(a).children(".seg_thumb_border").animate({opacity:0},b.fade)},b.changeImage=function(a){b.active||0===a||(b.current=b.current+a,img=new Image,img.src=b.getImage(),img.onload=function(){b.auto&&clearTimeout(b.timeout),b.active=!0,ratio=this.width/this.height,b.setBackground("#seg_background",ratio),$("#seg_animator").animate({opacity:0},b.fade,function(){b.setBackground(this,ratio)}).animate({opacity:1},0,function(){b.links&&b.setLink(),b.active=!1,b.auto&&(b.timeout=setTimeout(function(){b.changeImage(1)},b.delay)),b.preloadImage()}),b.nav&&$(".seg_navigator_thumb").each(function(){b.adjustThumb(this,a)}),b.text&&b.text_element&&$("#seg_text_inner").animate({opacity:0},b.fade/2,function(){$("#seg_text_inner").html(b.text[b.current%b.images.length])}).animate({opacity:1},b.fade/2)})},b.init()};